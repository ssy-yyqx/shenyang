/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2020 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["exports","./when-4ca4e419","./Check-430b3551","./Math-c0afb7aa","./defineProperties-24e785e9"],function(e,S,t,q,n){"use strict";function T(e,t,n){this.x=S.defaultValue(e,0),this.y=S.defaultValue(t,0),this.z=S.defaultValue(n,0)}T.fromSpherical=function(e,t){S.defined(t)||(t=new T);var n=e.clock,a=e.cone,i=S.defaultValue(e.magnitude,1),e=i*Math.sin(a);return t.x=e*Math.cos(n),t.y=e*Math.sin(n),t.z=i*Math.cos(a),t},T.fromElements=function(e,t,n,a){return S.defined(a)?(a.x=e,a.y=t,a.z=n,a):new T(e,t,n)},T.fromCartesian4=T.clone=function(e,t){if(S.defined(e))return S.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new T(e.x,e.y,e.z)},T.packedLength=3,T.pack=function(e,t,n){return n=S.defaultValue(n,0),t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t},T.unpack=function(e,t,n){return t=S.defaultValue(t,0),(n=!S.defined(n)?new T:n).x=e[t++],n.y=e[t++],n.z=e[t],n},T.packArray=function(e,t){var n=e.length;S.defined(t)?t.length=3*n:t=new Array(3*n);for(var a=0;a<n;++a)T.pack(e[a],t,3*a);return t},T.unpackArray=function(e,t){var n=e.length;S.defined(t)?t.length=n/3:t=new Array(n/3);for(var a=0;a<n;a+=3){var i=a/3;t[i]=T.unpack(e,a,t[i])}return t},T.fromArray=T.unpack,T.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},T.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},T.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n},T.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n},T.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},T.magnitude=function(e){return Math.sqrt(T.magnitudeSquared(e))};var a=new T;T.distance=function(e,t){return T.subtract(e,t,a),T.magnitude(a)},T.distanceSquared=function(e,t){return T.subtract(e,t,a),T.magnitudeSquared(a)},T.normalize=function(e,t){var n=T.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t},T.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},T.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n},T.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n},T.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n},T.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n},T.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n},T.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},T.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},T.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};var i=new T;T.lerp=function(e,t,n,a){return T.multiplyByScalar(t,n,i),a=T.multiplyByScalar(e,1-n,a),T.add(i,a,a)};var r=new T,u=new T;T.angleBetween=function(e,t){T.normalize(e,r),T.normalize(t,u);e=T.dot(r,u),t=T.magnitude(T.cross(r,u,r));return Math.atan2(t,e)};var o=new T;T.mostOrthogonalAxis=function(e,t){e=T.normalize(e,o);return T.abs(e,e),t=e.x<=e.y?e.x<=e.z?T.clone(T.UNIT_X,t):T.clone(T.UNIT_Z,t):e.y<=e.z?T.clone(T.UNIT_Y,t):T.clone(T.UNIT_Z,t)},T.projectVector=function(e,t,n){e=T.dot(e,t)/T.dot(t,t);return T.multiplyByScalar(t,e,n)},T.equals=function(e,t){return e===t||S.defined(e)&&S.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},T.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]},T.equalsEpsilon=function(e,t,n,a){return e===t||S.defined(e)&&S.defined(t)&&q.CesiumMath.equalsEpsilon(e.x,t.x,n,a)&&q.CesiumMath.equalsEpsilon(e.y,t.y,n,a)&&q.CesiumMath.equalsEpsilon(e.z,t.z,n,a)},T.cross=function(e,t,n){var a=e.x,i=e.y,r=e.z,u=t.x,o=t.y,e=t.z,t=i*e-r*o,e=r*u-a*e,u=a*o-i*u;return n.x=t,n.y=e,n.z=u,n},T.midpoint=function(e,t,n){return n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y),n.z=.5*(e.z+t.z),n},T.fromDegrees=function(e,t,n,a,i){return e=q.CesiumMath.toRadians(e),t=q.CesiumMath.toRadians(t),T.fromRadians(e,t,n,a,i)};var d=new T,s=new T,h=new T(40680631590769,40680631590769,40408299984661.445);T.fromRadians=function(e,t,n,a,i){n=S.defaultValue(n,0);var r=S.defined(a)?a.radiiSquared:h,a=Math.cos(t);d.x=a*Math.cos(e),d.y=a*Math.sin(e),d.z=Math.sin(t),d=T.normalize(d,d),T.multiplyComponents(r,d,s);r=Math.sqrt(T.dot(d,s));return s=T.divideByScalar(s,r,s),d=T.multiplyByScalar(d,n,d),S.defined(i)||(i=new T),T.add(s,d,i)},T.fromDegreesArray=function(e,t,n){var a=e.length;S.defined(n)?n.length=a/2:n=new Array(a/2);for(var i=0;i<a;i+=2){var r=e[i],u=e[i+1],o=i/2;n[o]=T.fromDegrees(r,u,0,t,n[o])}return n},T.fromRadiansArray=function(e,t,n){var a=e.length;S.defined(n)?n.length=a/2:n=new Array(a/2);for(var i=0;i<a;i+=2){var r=e[i],u=e[i+1],o=i/2;n[o]=T.fromRadians(r,u,0,t,n[o])}return n},T.fromDegreesArrayHeights=function(e,t,n){var a=e.length;S.defined(n)?n.length=a/3:n=new Array(a/3);for(var i=0;i<a;i+=3){var r=e[i],u=e[i+1],o=e[i+2],d=i/3;n[d]=T.fromDegrees(r,u,o,t,n[d])}return n},T.fromRadiansArrayHeights=function(e,t,n){var a=e.length;S.defined(n)?n.length=a/3:n=new Array(a/3);for(var i=0;i<a;i+=3){var r=e[i],u=e[i+1],o=e[i+2],d=i/3;n[d]=T.fromRadians(r,u,o,t,n[d])}return n},T.ZERO=S.freezeObject(new T(0,0,0)),T.UNIT_X=S.freezeObject(new T(1,0,0)),T.UNIT_Y=S.freezeObject(new T(0,1,0)),T.UNIT_Z=S.freezeObject(new T(0,0,1)),T.prototype.clone=function(e){return T.clone(this,e)},T.prototype.equals=function(e){return T.equals(this,e)},T.prototype.equalsEpsilon=function(e,t,n){return T.equalsEpsilon(this,e,t,n)},T.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};var O=new T,R=new T;function l(e,t,n,a,i){var r=e.x,u=e.y,o=e.z,d=t.x,s=t.y,t=t.z,h=r*r*d*d,l=u*u*s*s,f=o*o*t*t,d=h+l+f,s=Math.sqrt(1/d),t=T.multiplyByScalar(e,s,O);if(d<a)return isFinite(s)?T.clone(t,i):void 0;var c=n.x,m=n.y,y=n.z,n=R;n.x=t.x*c*2,n.y=t.y*m*2,n.z=t.z*y*2;var p=(1-s)*T.magnitude(e)/(.5*T.magnitude(n)),g=0;do{var x,M,w,v,_,C,z,g=(z=h*(v=(x=1/(1+(p-=g)*c))*x)+l*(_=(M=1/(1+p*m))*M)+f*(C=(w=1/(1+p*y))*w)-1)/(-2*(h*(v*x)*c+l*(_*M)*m+f*(C*w)*y))}while(Math.abs(z)>q.CesiumMath.EPSILON12);return S.defined(i)?(i.x=r*x,i.y=u*M,i.z=o*w,i):new T(r*x,u*M,o*w)}function f(e,t,n){this.longitude=S.defaultValue(e,0),this.latitude=S.defaultValue(t,0),this.height=S.defaultValue(n,0)}f.fromRadians=function(e,t,n,a){return n=S.defaultValue(n,0),S.defined(a)?(a.longitude=e,a.latitude=t,a.height=n,a):new f(e,t,n)},f.fromDegrees=function(e,t,n,a){return e=q.CesiumMath.toRadians(e),t=q.CesiumMath.toRadians(t),f.fromRadians(e,t,n,a)};var c=new T,m=new T,y=new T,p=new T(1/6378137,1/6378137,1/6356752.314245179),g=new T(1/40680631590769,1/40680631590769,1/40408299984661.445),x=q.CesiumMath.EPSILON1;function M(e,t,n,a){t=S.defaultValue(t,0),n=S.defaultValue(n,0),a=S.defaultValue(a,0),e._radii=new T(t,n,a),e._radiiSquared=new T(t*t,n*n,a*a),e._radiiToTheFourth=new T(t*t*t*t,n*n*n*n,a*a*a*a),e._oneOverRadii=new T(0===t?0:1/t,0===n?0:1/n,0===a?0:1/a),e._oneOverRadiiSquared=new T(0===t?0:1/(t*t),0===n?0:1/(n*n),0===a?0:1/(a*a)),e._minimumRadius=Math.min(t,n,a),e._maximumRadius=Math.max(t,n,a),e._centerToleranceSquared=q.CesiumMath.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function w(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,M(this,e,t,n)}f.fromCartesian=function(e,t,n){var a=S.defined(t)?t.oneOverRadii:p,i=S.defined(t)?t.oneOverRadiiSquared:g,a=l(e,a,i,S.defined(t)?t._centerToleranceSquared:x,m);if(S.defined(a)){t=T.multiplyComponents(a,i,c),t=T.normalize(t,t),i=T.subtract(e,a,y),a=Math.atan2(t.y,t.x),t=Math.asin(t.z),i=q.CesiumMath.sign(T.dot(i,e))*T.magnitude(i);return S.defined(n)?(n.longitude=a,n.latitude=t,n.height=i,n):new f(a,t,i)}},f.toCartesian=function(e,t,n){return T.fromRadians(e.longitude,e.latitude,e.height,t,n)},f.clone=function(e,t){if(S.defined(e))return S.defined(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new f(e.longitude,e.latitude,e.height)},f.equals=function(e,t){return e===t||S.defined(e)&&S.defined(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},f.equalsEpsilon=function(e,t,n){return e===t||S.defined(e)&&S.defined(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n},f.ZERO=S.freezeObject(new f(0,0,0)),f.prototype.clone=function(e){return f.clone(this,e)},f.prototype.equals=function(e){return f.equals(this,e)},f.prototype.equalsEpsilon=function(e,t){return f.equalsEpsilon(this,e,t)},f.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},n.defineProperties(w.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),w.clone=function(e,t){if(S.defined(e)){var n=e._radii;return S.defined(t)?(T.clone(n,t._radii),T.clone(e._radiiSquared,t._radiiSquared),T.clone(e._radiiToTheFourth,t._radiiToTheFourth),T.clone(e._oneOverRadii,t._oneOverRadii),T.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new w(n.x,n.y,n.z)}},w.fromCartesian3=function(e,t){return S.defined(t)||(t=new w),S.defined(e)&&M(t,e.x,e.y,e.z),t},w.WGS84=S.freezeObject(new w(6378137,6378137,6356752.314245179)),w.UNIT_SPHERE=S.freezeObject(new w(1,1,1)),w.MOON=S.freezeObject(new w(q.CesiumMath.LUNAR_RADIUS,q.CesiumMath.LUNAR_RADIUS,q.CesiumMath.LUNAR_RADIUS)),w.prototype.clone=function(e){return w.clone(this,e)},w.packedLength=T.packedLength,w.pack=function(e,t,n){return n=S.defaultValue(n,0),T.pack(e._radii,t,n),t},w.unpack=function(e,t,n){t=S.defaultValue(t,0);t=T.unpack(e,t);return w.fromCartesian3(t,n)},w.prototype.geocentricSurfaceNormal=T.normalize,w.prototype.geodeticSurfaceNormalCartographic=function(e,t){var n=e.longitude,a=e.latitude,i=Math.cos(a),e=i*Math.cos(n),n=i*Math.sin(n),a=Math.sin(a);return(t=!S.defined(t)?new T:t).x=e,t.y=n,t.z=a,T.normalize(t,t)},w.prototype.geodeticSurfaceNormal=function(e,t){return S.defined(t)||(t=new T),t=T.multiplyComponents(e,this._oneOverRadiiSquared,t),T.normalize(t,t)};var v=new T,_=new T;w.prototype.cartographicToCartesian=function(e,t){var n=v,a=_;this.geodeticSurfaceNormalCartographic(e,n),T.multiplyComponents(this._radiiSquared,n,a);var i=Math.sqrt(T.dot(n,a));return T.divideByScalar(a,i,a),T.multiplyByScalar(n,e.height,n),S.defined(t)||(t=new T),T.add(a,n,t)},w.prototype.cartographicArrayToCartesianArray=function(e,t){var n=e.length;S.defined(t)?t.length=n:t=new Array(n);for(var a=0;a<n;a++)t[a]=this.cartographicToCartesian(e[a],t[a]);return t};var C=new T,z=new T,A=new T;function V(e,t,n,a){this.west=S.defaultValue(e,0),this.south=S.defaultValue(t,0),this.east=S.defaultValue(n,0),this.north=S.defaultValue(a,0)}w.prototype.cartesianToCartographic=function(e,t){var n=this.scaleToGeodeticSurface(e,z);if(S.defined(n)){var a=this.geodeticSurfaceNormal(n,C),i=T.subtract(e,n,A),n=Math.atan2(a.y,a.x),a=Math.asin(a.z),i=q.CesiumMath.sign(T.dot(i,e))*T.magnitude(i);return S.defined(t)?(t.longitude=n,t.latitude=a,t.height=i,t):new f(n,a,i)}},w.prototype.cartesianArrayToCartographicArray=function(e,t){var n=e.length;S.defined(t)?t.length=n:t=new Array(n);for(var a=0;a<n;++a)t[a]=this.cartesianToCartographic(e[a],t[a]);return t},w.prototype.scaleToGeodeticSurface=function(e,t){return l(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},w.prototype.scaleToGeocentricSurface=function(e,t){S.defined(t)||(t=new T);var n=e.x,a=e.y,i=e.z,r=this._oneOverRadiiSquared,r=1/Math.sqrt(n*n*r.x+a*a*r.y+i*i*r.z);return T.multiplyByScalar(e,r,t)},w.prototype.transformPositionToScaledSpace=function(e,t){return S.defined(t)||(t=new T),T.multiplyComponents(e,this._oneOverRadii,t)},w.prototype.transformPositionFromScaledSpace=function(e,t){return S.defined(t)||(t=new T),T.multiplyComponents(e,this._radii,t)},w.prototype.equals=function(e){return this===e||S.defined(e)&&T.equals(this._radii,e._radii)},w.prototype.toString=function(){return this._radii.toString()},w.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){t=S.defaultValue(t,0);var a=this._squaredXOverSquaredZ;if((n=!S.defined(n)?new T:n).x=0,n.y=0,n.z=e.z*(1-a),!(Math.abs(n.z)>=this._radii.z-t))return n},n.defineProperties(V.prototype,{width:{get:function(){return V.computeWidth(this)}},height:{get:function(){return V.computeHeight(this)}}}),V.packedLength=4,V.pack=function(e,t,n){return n=S.defaultValue(n,0),t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t},V.unpack=function(e,t,n){return t=S.defaultValue(t,0),(n=!S.defined(n)?new V:n).west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n},V.computeWidth=function(e){var t=e.east,e=e.west;return t<e&&(t+=q.CesiumMath.TWO_PI),t-e},V.computeHeight=function(e){return e.north-e.south},V.fromDegrees=function(e,t,n,a,i){return e=q.CesiumMath.toRadians(S.defaultValue(e,0)),t=q.CesiumMath.toRadians(S.defaultValue(t,0)),n=q.CesiumMath.toRadians(S.defaultValue(n,0)),a=q.CesiumMath.toRadians(S.defaultValue(a,0)),S.defined(i)?(i.west=e,i.south=t,i.east=n,i.north=a,i):new V(e,t,n,a)},V.fromRadians=function(e,t,n,a,i){return S.defined(i)?(i.west=S.defaultValue(e,0),i.south=S.defaultValue(t,0),i.east=S.defaultValue(n,0),i.north=S.defaultValue(a,0),i):new V(e,t,n,a)},V.fromCartographicArray=function(e,t){for(var n=Number.MAX_VALUE,a=-Number.MAX_VALUE,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,u=Number.MAX_VALUE,o=-Number.MAX_VALUE,d=0,s=e.length;d<s;d++)var h=e[d],n=Math.min(n,h.longitude),a=Math.max(a,h.longitude),u=Math.min(u,h.latitude),o=Math.max(o,h.latitude),h=0<=h.longitude?h.longitude:h.longitude+q.CesiumMath.TWO_PI,i=Math.min(i,h),r=Math.max(r,h);return r-i<a-n&&(n=i,(a=r)>q.CesiumMath.PI&&(a-=q.CesiumMath.TWO_PI),n>q.CesiumMath.PI&&(n-=q.CesiumMath.TWO_PI)),S.defined(t)?(t.west=n,t.south=u,t.east=a,t.north=o,t):new V(n,u,a,o)},V.fromCartesianArray=function(e,t,n){t=S.defaultValue(t,w.WGS84);for(var a=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,u=-Number.MAX_VALUE,o=Number.MAX_VALUE,d=-Number.MAX_VALUE,s=0,h=e.length;s<h;s++)var l=t.cartesianToCartographic(e[s]),a=Math.min(a,l.longitude),i=Math.max(i,l.longitude),o=Math.min(o,l.latitude),d=Math.max(d,l.latitude),l=0<=l.longitude?l.longitude:l.longitude+q.CesiumMath.TWO_PI,r=Math.min(r,l),u=Math.max(u,l);return u-r<i-a&&(a=r,(i=u)>q.CesiumMath.PI&&(i-=q.CesiumMath.TWO_PI),a>q.CesiumMath.PI&&(a-=q.CesiumMath.TWO_PI)),S.defined(n)?(n.west=a,n.south=o,n.east=i,n.north=d,n):new V(a,o,i,d)},V.clone=function(e,t){if(S.defined(e))return S.defined(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new V(e.west,e.south,e.east,e.north)},V.equalsEpsilon=function(e,t,n){return e===t||S.defined(e)&&S.defined(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n},V.prototype.clone=function(e){return V.clone(this,e)},V.prototype.equals=function(e){return V.equals(this,e)},V.equals=function(e,t){return e===t||S.defined(e)&&S.defined(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},V.prototype.equalsEpsilon=function(e,t){return V.equalsEpsilon(this,e,t)},V.validate=function(e){},V.southwest=function(e,t){return S.defined(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new f(e.west,e.south)},V.northwest=function(e,t){return S.defined(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new f(e.west,e.north)},V.northeast=function(e,t){return S.defined(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new f(e.east,e.north)},V.southeast=function(e,t){return S.defined(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new f(e.east,e.south)},V.center=function(e,t){var n=e.east,a=e.west;n<a&&(n+=q.CesiumMath.TWO_PI);n=q.CesiumMath.negativePiToPi(.5*(a+n)),e=.5*(e.south+e.north);return S.defined(t)?(t.longitude=n,t.latitude=e,t.height=0,t):new f(n,e)},V.intersection=function(e,t,n){var a=e.east,i=e.west,r=t.east,u=t.west;a<i&&0<r?a+=q.CesiumMath.TWO_PI:r<u&&0<a&&(r+=q.CesiumMath.TWO_PI),a<i&&u<0?u+=q.CesiumMath.TWO_PI:r<u&&i<0&&(i+=q.CesiumMath.TWO_PI);u=q.CesiumMath.negativePiToPi(Math.max(i,u)),a=q.CesiumMath.negativePiToPi(Math.min(a,r));if(!((e.west<e.east||t.west<t.east)&&a<=u)){r=Math.max(e.south,t.south),t=Math.min(e.north,t.north);if(!(t<=r))return S.defined(n)?(n.west=u,n.south=r,n.east=a,n.north=t,n):new V(u,r,a,t)}},V.simpleIntersection=function(e,t,n){var a=Math.max(e.west,t.west),i=Math.max(e.south,t.south),r=Math.min(e.east,t.east),t=Math.min(e.north,t.north);if(!(t<=i||r<=a))return S.defined(n)?(n.west=a,n.south=i,n.east=r,n.north=t,n):new V(a,i,r,t)},V.union=function(e,t,n){S.defined(n)||(n=new V);var a=e.east,i=e.west,r=t.east,u=t.west;a<i&&0<r?a+=q.CesiumMath.TWO_PI:r<u&&0<a&&(r+=q.CesiumMath.TWO_PI),a<i&&u<0?u+=q.CesiumMath.TWO_PI:r<u&&i<0&&(i+=q.CesiumMath.TWO_PI);u=q.CesiumMath.convertLongitudeRange(Math.min(i,u)),r=q.CesiumMath.convertLongitudeRange(Math.max(a,r));return n.west=u,n.south=Math.min(e.south,t.south),n.east=r,n.north=Math.max(e.north,t.north),n},V.expand=function(e,t,n){return(n=!S.defined(n)?new V:n).west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n},V.contains=function(e,t){var n=t.longitude,a=t.latitude,i=e.west,t=e.east;return t<i&&(t+=q.CesiumMath.TWO_PI,n<0&&(n+=q.CesiumMath.TWO_PI)),(i<n||q.CesiumMath.equalsEpsilon(n,i,q.CesiumMath.EPSILON14))&&(n<t||q.CesiumMath.equalsEpsilon(n,t,q.CesiumMath.EPSILON14))&&a>=e.south&&a<=e.north};var b=new f;function I(e,t){this.x=S.defaultValue(e,0),this.y=S.defaultValue(t,0)}V.subsample=function(e,t,n,a){t=S.defaultValue(t,w.WGS84),n=S.defaultValue(n,0),S.defined(a)||(a=[]);var i=0,r=e.north,u=e.south,o=e.east,d=e.west,s=b;s.height=n,s.longitude=d,s.latitude=r,a[i]=t.cartographicToCartesian(s,a[i]),i++,s.longitude=o,a[i]=t.cartographicToCartesian(s,a[i]),i++,s.latitude=u,a[i]=t.cartographicToCartesian(s,a[i]),i++,s.longitude=d,a[i]=t.cartographicToCartesian(s,a[i]),i++,s.latitude=r<0?r:0<u?u:0;for(var h=1;h<8;++h)s.longitude=-Math.PI+h*q.CesiumMath.PI_OVER_TWO,V.contains(e,s)&&(a[i]=t.cartographicToCartesian(s,a[i]),i++);return 0===s.latitude&&(s.longitude=d,a[i]=t.cartographicToCartesian(s,a[i]),i++,s.longitude=o,a[i]=t.cartographicToCartesian(s,a[i]),i++),a.length=i,a},V.MAX_VALUE=S.freezeObject(new V(-Math.PI,-q.CesiumMath.PI_OVER_TWO,Math.PI,q.CesiumMath.PI_OVER_TWO)),I.fromElements=function(e,t,n){return S.defined(n)?(n.x=e,n.y=t,n):new I(e,t)},I.fromCartesian3=I.clone=function(e,t){if(S.defined(e))return S.defined(t)?(t.x=e.x,t.y=e.y,t):new I(e.x,e.y)},I.fromCartesian4=I.clone,I.packedLength=2,I.pack=function(e,t,n){return n=S.defaultValue(n,0),t[n++]=e.x,t[n]=e.y,t},I.unpack=function(e,t,n){return t=S.defaultValue(t,0),(n=!S.defined(n)?new I:n).x=e[t++],n.y=e[t],n},I.packArray=function(e,t){var n=e.length;S.defined(t)?t.length=2*n:t=new Array(2*n);for(var a=0;a<n;++a)I.pack(e[a],t,2*a);return t},I.unpackArray=function(e,t){var n=e.length;S.defined(t)?t.length=n/2:t=new Array(n/2);for(var a=0;a<n;a+=2){var i=a/2;t[i]=I.unpack(e,a,t[i])}return t},I.fromArray=I.unpack,I.maximumComponent=function(e){return Math.max(e.x,e.y)},I.minimumComponent=function(e){return Math.min(e.x,e.y)},I.minimumByComponent=function(e,t,n){return n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n},I.maximumByComponent=function(e,t,n){return n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n},I.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},I.magnitude=function(e){return Math.sqrt(I.magnitudeSquared(e))};var E=new I;I.distance=function(e,t){return I.subtract(e,t,E),I.magnitude(E)},I.distanceSquared=function(e,t){return I.subtract(e,t,E),I.magnitudeSquared(E)},I.normalize=function(e,t){var n=I.magnitude(e);return t.x=e.x/n,t.y=e.y/n,t},I.dot=function(e,t){return e.x*t.x+e.y*t.y},I.multiplyComponents=function(e,t,n){return n.x=e.x*t.x,n.y=e.y*t.y,n},I.divideComponents=function(e,t,n){return n.x=e.x/t.x,n.y=e.y/t.y,n},I.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n},I.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n},I.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n},I.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n},I.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},I.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var P=new I;I.lerp=function(e,t,n,a){return I.multiplyByScalar(t,n,P),a=I.multiplyByScalar(e,1-n,a),I.add(P,a,a)};var N=new I,U=new I;I.angleBetween=function(e,t){return I.normalize(e,N),I.normalize(t,U),q.CesiumMath.acosClamped(I.dot(N,U))};var L=new I;I.mostOrthogonalAxis=function(e,t){e=I.normalize(e,L);return I.abs(e,e),t=e.x<=e.y?I.clone(I.UNIT_X,t):I.clone(I.UNIT_Y,t)},I.equals=function(e,t){return e===t||S.defined(e)&&S.defined(t)&&e.x===t.x&&e.y===t.y},I.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]},I.equalsEpsilon=function(e,t,n,a){return e===t||S.defined(e)&&S.defined(t)&&q.CesiumMath.equalsEpsilon(e.x,t.x,n,a)&&q.CesiumMath.equalsEpsilon(e.y,t.y,n,a)},I.ZERO=S.freezeObject(new I(0,0)),I.UNIT_X=S.freezeObject(new I(1,0)),I.UNIT_Y=S.freezeObject(new I(0,1)),I.prototype.clone=function(e){return I.clone(this,e)},I.prototype.equals=function(e){return I.equals(this,e)},I.prototype.equalsEpsilon=function(e,t,n){return I.equalsEpsilon(this,e,t,n)},I.prototype.toString=function(){return"("+this.x+", "+this.y+")"},e.Cartesian2=I,e.Cartesian3=T,e.Cartographic=f,e.Ellipsoid=w,e.Rectangle=V});
